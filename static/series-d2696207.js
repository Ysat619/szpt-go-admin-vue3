import{aa as e,b as a,a as l,r,h as t,Y as s,j as d,w as n,i as o,f as i,aj as u,o as c,y as m,C as b,l as p,ag as f,am as v,t as I,q as y,D as _,F as g,p as h,E as C,ae as w,_ as k}from"./index-dedb117b.js";import{g as N}from"./brand-af4dfbdc.js";const x={class:"app-container"},V={class:"toolbar-wrapper"},S={class:"card-container"},T=a({name:"ElementPlus"}),q=k(a({...T,setup(a){const k=l(!1),T=l(!1),q=l(null),$=r({brandId:"",seriesName:"",seriesId:""}),j=r({seriesName:[{required:!0,trigger:"blur",message:"请输入车系名称"}],brandId:[{required:!0,trigger:"blur",message:"请选择车系所属品牌"}]}),D=()=>{var a;null==(a=q.value)||a.validate((a=>{if(!a)return!1;var l;$.seriesId?function(a){return e({url:`TbCarSeries/${a.brandId}`,method:"put",data:a})}($).then((e=>{e.data?(F(),z(),T.value=!1,C.success("修改成功")):C.error("修改失败")})):(l=$,e({url:"TbCarSeries",method:"post",data:l})).then((e=>{e.data?(F(),z(),T.value=!1,C.success("新增成功")):C.error("新增失败")}))}))},z=()=>{$.seriesName="",$.brandId="",$.seriesId=""},E=a=>{a.brandId?w.confirm(`您确定删除【${a.seriesName}】吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{var l;(l=a.seriesId,e({url:`TbCarSeries/${l}`,method:"delete"})).then((()=>{C.success("删除成功"),F()}))})):C.error("无法删除该车系！")},U=l([]),B=l([]);N().then((e=>B.value=e.data));const F=async()=>{k.value=!0;try{const a=await function(a=1,l=9999){return e({url:`TbCarSeries/getList/${a}/${l}`,method:"get"})}();U.value=a.data}catch(a){console.error(a),U.value=[]}finally{k.value=!1}},L=e=>{"number"==typeof e&&(e=e.toString());for(const a of B.value)if(a.brandId===e)return a.brandName};return F(),(e,a)=>{const l=i("el-button"),r=i("el-tooltip"),C=i("el-table-column"),w=i("el-table"),N=i("el-card"),P=i("el-text"),R=i("el-form-item"),Y=i("el-input"),A=i("el-option"),G=i("el-select"),H=i("el-form"),J=i("el-dialog"),K=u("loading");return c(),t("div",x,[s((c(),d(N,{shadow:"never"},{default:n((()=>[m("div",V,[m("div",null,[o(l,{type:"primary",icon:p(f),onClick:a[0]||(a[0]=e=>T.value=!0)},{default:n((()=>[b("新增车系")])),_:1},8,["icon"])]),m("div",null,[o(r,{content:"刷新表格"},{default:n((()=>[o(l,{type:"primary",icon:p(v),circle:"",onClick:F},null,8,["icon"])])),_:1})])]),o(w,{data:U.value,style:{width:"100%"},"row-key":"id",border:""},{default:n((()=>[o(C,{prop:"seriesId",label:"车系ID"}),o(C,{prop:"seriesName",label:"车系名称"}),o(C,{label:"所属品牌"},{default:n((e=>[b(I(L(e.row.brandId)),1)])),_:1}),o(C,{fixed:"right",label:"操作",width:"170",align:"center"},{default:n((e=>[o(l,{type:"primary",text:"",bg:"",size:"small",icon:"Edit",onClick:a=>{return l=e.row,$.seriesName=l.seriesName,$.brandId=l.brandId,$.seriesId=l.seriesId,void(T.value=!0);var l}},{default:n((()=>[b("修改")])),_:2},1032,["onClick"]),o(l,{type:"danger",text:"",bg:"",size:"small",icon:"Delete",onClick:a=>E(e.row)},{default:n((()=>[b("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})),[[K,k.value]]),o(J,{modelValue:T.value,"onUpdate:modelValue":a[5]||(a[5]=e=>T.value=e),title:$.seriesId?"修改车系":"新增车系",onClose:z},{footer:n((()=>[o(l,{onClick:a[4]||(a[4]=e=>T.value=!1)},{default:n((()=>[b("取消")])),_:1}),o(l,{type:"primary",onClick:D},{default:n((()=>[b("确认")])),_:1})])),default:n((()=>[o(H,{model:$,ref_key:"formRef",ref:q,rules:j,"label-position":"left","label-width":"80px",size:"default",onSubmit:a[3]||(a[3]=y((()=>{}),["prevent"]))},{default:n((()=>[m("div",S,[$.seriesId?(c(),d(R,{key:0,label:"车系 ID"},{default:n((()=>[o(P,null,{default:n((()=>[b(I($.seriesId),1)])),_:1})])),_:1})):_("",!0),o(R,{label:"车系名称",prop:"seriesName",class:"required"},{default:n((()=>[o(Y,{modelValue:$.seriesName,"onUpdate:modelValue":a[1]||(a[1]=e=>$.seriesName=e),type:"text",clearable:"",placeholder:"请输入车系名"},null,8,["modelValue"])])),_:1}),o(R,{label:"所属品牌",prop:"brandId",class:"required"},{default:n((()=>[o(G,{modelValue:$.brandId,"onUpdate:modelValue":a[2]||(a[2]=e=>$.brandId=e),class:"full-width-input",placeholder:"请选择车系所属品牌"},{default:n((()=>[(c(!0),t(g,null,h(B.value,(e=>(c(),d(A,{key:e.brandId,label:e.brandName,value:e.brandId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-19f1dc6b"]]);export{q as default};
