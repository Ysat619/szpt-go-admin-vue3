import{b as e,a,r as l,h as t,Y as o,j as r,w as u,i as n,f as d,aj as s,o as c,y as i,C as m,l as y,ag as v,am as p,q as f,t as b,D as _,E as g,ae as h,_ as k}from"./index-dedb117b.js";import{g as w,a as I,e as x,d as C}from"./country-ff98bf8e.js";const N={class:"app-container"},V={class:"toolbar-wrapper"},j={class:"card-container"},D=e({name:"ElementPlus"}),q=k(e({...D,setup(e){const k=a(!1),D=a(!1),q=a(null),z=l({countryId:"",countryName:""}),E=l({countryName:[{required:!0,trigger:"blur",message:"请输入国家名称"}]}),B=()=>{var e;null==(e=q.value)||e.validate((e=>{if(!e)return!1;void 0===U.value?I(z).then((e=>{e.data?(R(),T(),D.value=!1,g.success("新增成功")):g.error("新增失败")})):x(z).then((e=>{e.data?(R(),T(),D.value=!1,g.success("修改成功")):g.error("修改失败")}))}))},T=()=>{U.value=void 0,z.countryName="",z.countryId=""},U=a(void 0),P=a([]),R=async()=>{k.value=!0;try{const e=await w();P.value=e.data}catch(e){console.error(e),P.value=[]}finally{k.value=!1}};return R(),(e,a)=>{const l=d("el-button"),w=d("el-tooltip"),I=d("el-table-column"),x=d("el-table"),S=d("el-card"),Y=d("el-text"),$=d("el-form-item"),A=d("el-input"),F=d("el-form"),G=d("el-dialog"),H=s("loading");return c(),t("div",N,[o((c(),r(S,{shadow:"never"},{default:u((()=>[i("div",V,[i("div",null,[n(l,{type:"primary",icon:y(v),onClick:a[0]||(a[0]=e=>D.value=!0)},{default:u((()=>[m("新增国家")])),_:1},8,["icon"])]),i("div",null,[n(w,{content:"刷新表格"},{default:u((()=>[n(l,{type:"primary",icon:y(p),circle:"",onClick:R},null,8,["icon"])])),_:1})])]),n(x,{data:P.value,style:{width:"100%"},"row-key":"id",border:""},{default:u((()=>[n(I,{prop:"countryId",label:"国家ID"}),n(I,{prop:"countryName",label:"国家名称"}),n(I,{fixed:"right",label:"操作",width:"170",align:"center"},{default:u((e=>[n(l,{type:"primary",text:"",bg:"",size:"small",icon:"Edit",onClick:a=>{return l=e.row,U.value=l.countryId,z.countryName=l.countryName,z.countryId=l.countryId,void(D.value=!0);var l}},{default:u((()=>[m("修改")])),_:2},1032,["onClick"]),n(l,{type:"danger",text:"",bg:"",size:"small",icon:"Delete",onClick:a=>{var l;(l=e.row).countryId?h.confirm(`您确定删除【${l.countryName}】吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{C(l.countryId).then((()=>{g.success("删除成功"),R()}))})):g.error("无法删除该国家！")}},{default:u((()=>[m("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})),[[H,k.value]]),n(G,{modelValue:D.value,"onUpdate:modelValue":a[4]||(a[4]=e=>D.value=e),title:void 0===U.value?"新增国家":"修改国家",onClose:T},{footer:u((()=>[n(l,{onClick:a[3]||(a[3]=e=>D.value=!1)},{default:u((()=>[m("取消")])),_:1}),n(l,{type:"primary",onClick:B},{default:u((()=>[m("确认")])),_:1})])),default:u((()=>[n(F,{model:z,ref_key:"formRef",ref:q,rules:E,"label-position":"left","label-width":"80px",size:"default",onSubmit:a[2]||(a[2]=f((()=>{}),["prevent"]))},{default:u((()=>[i("div",j,[U.value?(c(),r($,{key:0,label:"国家 ID"},{default:u((()=>[n(Y,null,{default:u((()=>[m(b(U.value),1)])),_:1})])),_:1})):_("",!0),n($,{label:"国家名",prop:"countryName",class:"required"},{default:u((()=>[n(A,{modelValue:z.countryName,"onUpdate:modelValue":a[1]||(a[1]=e=>z.countryName=e),type:"text",clearable:"",placeholder:"请输入国家名"},null,8,["modelValue"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-fe2d3e4d"]]);export{q as default};
