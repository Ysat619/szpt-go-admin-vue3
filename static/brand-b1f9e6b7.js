import{b as a,a as e,r as l,h as r,Y as t,j as d,w as n,i as o,f as u,aj as s,o as i,y as c,C as b,l as m,ag as p,am as f,t as y,q as v,D as I,F as _,p as C,E as g,ae as h,_ as w}from"./index-dedb117b.js";import{g as k,a as N,e as x,d as V}from"./brand-af4dfbdc.js";import{g as j}from"./country-ff98bf8e.js";const q={class:"app-container"},D={class:"toolbar-wrapper"},z={class:"card-container"},E=a({name:"ElementPlus"}),U=w(a({...E,setup(a){const w=e(!1),E=e(!1),U=e(null),B=l({brandId:"",brandName:"",brandCountryId:""}),T=l({brandName:[{required:!0,trigger:"blur",message:"请输入品牌名称"}],brandCountryId:[{required:!0,trigger:"blur",message:"请选择品牌所属国家"}]}),F=()=>{var a;null==(a=U.value)||a.validate((a=>{if(!a)return!1;B.brandId?x(B).then((a=>{a.data?(Y(),P(),E.value=!1,g.success("修改成功")):g.error("修改失败")})):N(B).then((a=>{a.data?(Y(),P(),E.value=!1,g.success("新增成功")):g.error("新增失败")}))}))},P=()=>{B.brandName="",B.brandId="",B.brandCountryId=""},R=e([]),S=e([]);j().then((a=>S.value=a.data));const Y=async()=>{w.value=!0;try{const a=await k();R.value=a.data}catch(a){console.error(a),R.value=[]}finally{w.value=!1}},$=a=>{for(const e of S.value)if(e.countryId===a)return e.countryName};return Y(),(a,e)=>{const l=u("el-button"),k=u("el-tooltip"),N=u("el-table-column"),x=u("el-table"),j=u("el-card"),A=u("el-text"),G=u("el-form-item"),H=u("el-input"),J=u("el-option"),K=u("el-select"),L=u("el-form"),M=u("el-dialog"),O=s("loading");return i(),r("div",q,[t((i(),d(j,{shadow:"never"},{default:n((()=>[c("div",D,[c("div",null,[o(l,{type:"primary",icon:m(p),onClick:e[0]||(e[0]=a=>E.value=!0)},{default:n((()=>[b("新增品牌")])),_:1},8,["icon"])]),c("div",null,[o(k,{content:"刷新表格"},{default:n((()=>[o(l,{type:"primary",icon:m(f),circle:"",onClick:Y},null,8,["icon"])])),_:1})])]),o(x,{data:R.value,style:{width:"100%"},"row-key":"id",border:""},{default:n((()=>[o(N,{prop:"brandId",label:"品牌ID"}),o(N,{prop:"brandName",label:"品牌名称"}),o(N,{label:"所属国家"},{default:n((a=>[b(y($(a.row.brandCountryId)),1)])),_:1}),o(N,{fixed:"right",label:"操作",width:"170",align:"center"},{default:n((a=>[o(l,{type:"primary",text:"",bg:"",size:"small",icon:"Edit",onClick:e=>{return l=a.row,B.brandName=l.brandName,B.brandId=l.brandId,B.brandCountryId=l.brandCountryId,void(E.value=!0);var l}},{default:n((()=>[b("修改")])),_:2},1032,["onClick"]),o(l,{type:"danger",text:"",bg:"",size:"small",icon:"Delete",onClick:e=>{var l;(l=a.row).brandId?h.confirm(`您确定删除【${l.brandName}】吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{V(l.brandId).then((()=>{g.success("删除成功"),Y()}))})):g.error("无法删除该品牌！")}},{default:n((()=>[b("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])),_:1})),[[O,w.value]]),o(M,{modelValue:E.value,"onUpdate:modelValue":e[5]||(e[5]=a=>E.value=a),title:B.brandId?"修改品牌":"新增品牌",onClose:P},{footer:n((()=>[o(l,{onClick:e[4]||(e[4]=a=>E.value=!1)},{default:n((()=>[b("取消")])),_:1}),o(l,{type:"primary",onClick:F},{default:n((()=>[b("确认")])),_:1})])),default:n((()=>[o(L,{model:B,ref_key:"formRef",ref:U,rules:T,"label-position":"left","label-width":"80px",size:"default",onSubmit:e[3]||(e[3]=v((()=>{}),["prevent"]))},{default:n((()=>[c("div",z,[B.brandId?(i(),d(G,{key:0,label:"品牌 ID"},{default:n((()=>[o(A,null,{default:n((()=>[b(y(B.brandId),1)])),_:1})])),_:1})):I("",!0),o(G,{label:"品牌名",prop:"brandName",class:"required"},{default:n((()=>[o(H,{modelValue:B.brandName,"onUpdate:modelValue":e[1]||(e[1]=a=>B.brandName=a),type:"text",clearable:"",placeholder:"请输入品牌名"},null,8,["modelValue"])])),_:1}),o(G,{label:"所属国家",prop:"brandCountryId",class:"required"},{default:n((()=>[o(K,{modelValue:B.brandCountryId,"onUpdate:modelValue":e[2]||(e[2]=a=>B.brandCountryId=a),class:"full-width-input",clearable:"",placeholder:"请选择品牌所属国家"},{default:n((()=>[(i(!0),r(_,null,C(S.value,(a=>(i(),d(J,{key:a.countryId,label:a.countryName,value:a.countryId},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])])),_:1},8,["model","rules"])])),_:1},8,["modelValue","title"])])}}}),[["__scopeId","data-v-84c16ac8"]]);export{U as default};
